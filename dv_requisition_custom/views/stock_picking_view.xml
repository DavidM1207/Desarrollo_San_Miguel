<odoo>
<data>
<record id="inherit_view_stock_picking_form" model="ir.ui.view">
<field name="name">inherit_view_stock_picking_form</field>
<field name="model">stock.picking</field>
<field name="inherit_id" ref="stock.view_picking_form"/>
<field name="arch" type="xml">
<xpath expr="//notebook/page[@name='operations']/field[@name='move_ids_without_package']/tree/field[@name='quantity']" position="after">
<field name="requisition_order" column_invisible="True"/>
<field name="usage_origin" column_invisible="True"/>
<field name="usage_dest" column_invisible="True"/>
<field name="user_can_edit_quantity" column_invisible="True"/>
<field name="quantity_readonly" column_invisible="True"/>
</xpath>
<xpath expr="//notebook/page[@name='operations']/field[@name='move_ids_without_package']/tree/field[@name='quantity']" position="attributes">
<attribute name="readonly">(not is_quantity_done_editable) or quantity_readonly or (requisition_order and usage_origin == 'transit' and usage_dest == 'internal' and not user_can_edit_quantity)</attribute>
</xpath>
</field>
</record>
</data>
</odoo>
